<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Scm.Abstract-Syntax</title><link rel="stylesheet" href="Agda.css"><script type="text/javascript" src="highlight-hover.js"></script></head><body><pre class="Agda"><a id="1" class="Background"># Abstract Syntax

</a><a id="20" class="Markup">```agda
</a><a id="28" class="Symbol">{-#</a> <a id="32" class="Keyword">OPTIONS</a> <a id="40" class="Pragma">--rewriting</a> <a id="52" class="Pragma">--confluence-check</a> <a id="71" class="Pragma">--lossy-unification</a> <a id="91" class="Symbol">#-}</a>

<a id="96" class="Keyword">module</a> <a id="103" href="Scm.Abstract-Syntax.html" class="Module">Scm.Abstract-Syntax</a> <a id="123" class="Keyword">where</a>

<a id="130" class="Keyword">open</a> <a id="135" class="Keyword">import</a> <a id="142" href="Data.Integer.Base.html" class="Module">Data.Integer.Base</a>  <a id="161" class="Keyword">renaming</a> <a id="170" class="Symbol">(</a><a id="171" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a> <a id="173" class="Symbol">to</a> <a id="176" class="Datatype">Int</a><a id="179" class="Symbol">)</a> <a id="181" class="Keyword">public</a>
<a id="188" class="Keyword">open</a> <a id="193" class="Keyword">import</a> <a id="200" href="Data.String.Base.html" class="Module">Data.String.Base</a>   <a id="219" class="Keyword">using</a> <a id="225" class="Symbol">(</a><a id="226" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="232" class="Symbol">)</a> <a id="234" class="Keyword">public</a>

<a id="242" class="Keyword">data</a>       <a id="Con"></a><a id="253" href="Scm.Abstract-Syntax.html#253" class="Datatype">Con</a>    <a id="260" class="Symbol">:</a> <a id="262" href="Agda.Primitive.html#388" class="Primitive">Set</a>     <a id="270" class="Comment">-- constants, *excluding* quotations</a>
<a id="307" class="Keyword">variable</a>   <a id="318" href="Scm.Abstract-Syntax.html#318" class="Generalizable">K</a>      <a id="325" class="Symbol">:</a> <a id="327" href="Scm.Abstract-Syntax.html#253" class="Datatype">Con</a>
<a id="Ide"></a><a id="331" href="Scm.Abstract-Syntax.html#331" class="Function">Ide</a>               <a id="349" class="Symbol">=</a> <a id="351" href="Agda.Builtin.String.html#335" class="Postulate">String</a>  <a id="359" class="Comment">-- identifiers (variables)</a>
<a id="386" class="Keyword">variable</a>   <a id="397" href="Scm.Abstract-Syntax.html#397" class="Generalizable">I</a>      <a id="404" class="Symbol">:</a> <a id="406" href="Scm.Abstract-Syntax.html#331" class="Function">Ide</a>
<a id="410" class="Keyword">data</a>       <a id="Exp"></a><a id="421" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a>    <a id="428" class="Symbol">:</a> <a id="430" href="Agda.Primitive.html#388" class="Primitive">Set</a>     <a id="438" class="Comment">-- expressions</a>
<a id="453" class="Keyword">variable</a>   <a id="464" href="Scm.Abstract-Syntax.html#464" class="Generalizable">E</a>      <a id="471" class="Symbol">:</a> <a id="473" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a>
<a id="477" class="Keyword">data</a>       <a id="Exp⋆"></a><a id="488" href="Scm.Abstract-Syntax.html#488" class="Datatype">Exp⋆</a>   <a id="495" class="Symbol">:</a> <a id="497" href="Agda.Primitive.html#388" class="Primitive">Set</a>     <a id="505" class="Comment">-- expression sequences</a>
<a id="529" class="Keyword">variable</a>   <a id="540" href="Scm.Abstract-Syntax.html#540" class="Generalizable">E⋆</a>     <a id="547" class="Symbol">:</a> <a id="549" href="Scm.Abstract-Syntax.html#488" class="Datatype">Exp⋆</a>

<a id="555" class="Keyword">data</a>       <a id="Body"></a><a id="566" href="Scm.Abstract-Syntax.html#566" class="Datatype">Body</a>   <a id="573" class="Symbol">:</a> <a id="575" href="Agda.Primitive.html#388" class="Primitive">Set</a>     <a id="583" class="Comment">-- body expression or definition</a>
<a id="616" class="Keyword">variable</a>   <a id="627" href="Scm.Abstract-Syntax.html#627" class="Generalizable">B</a>      <a id="634" class="Symbol">:</a> <a id="636" href="Scm.Abstract-Syntax.html#566" class="Datatype">Body</a>
<a id="641" class="Keyword">data</a>       <a id="Body⁺"></a><a id="652" href="Scm.Abstract-Syntax.html#652" class="Datatype">Body⁺</a>  <a id="659" class="Symbol">:</a> <a id="661" href="Agda.Primitive.html#388" class="Primitive">Set</a>     <a id="669" class="Comment">-- body sequences</a>
<a id="687" class="Keyword">variable</a>   <a id="698" href="Scm.Abstract-Syntax.html#698" class="Generalizable">B⁺</a>     <a id="705" class="Symbol">:</a> <a id="707" href="Scm.Abstract-Syntax.html#652" class="Datatype">Body⁺</a>
<a id="713" class="Keyword">data</a>       <a id="Prog"></a><a id="724" href="Scm.Abstract-Syntax.html#724" class="Datatype">Prog</a>   <a id="731" class="Symbol">:</a> <a id="733" href="Agda.Primitive.html#388" class="Primitive">Set</a>     <a id="741" class="Comment">-- programs</a>
<a id="753" class="Keyword">variable</a>   <a id="764" href="Scm.Abstract-Syntax.html#764" class="Generalizable">Π</a>      <a id="771" class="Symbol">:</a> <a id="773" href="Scm.Abstract-Syntax.html#724" class="Datatype">Prog</a>
<a id="778" class="Markup">```
</a><a id="782" class="Background">
## Literal Constants

</a><a id="805" class="Markup">```agda
</a><a id="813" class="Keyword">data</a> <a id="818" href="Scm.Abstract-Syntax.html#253" class="Datatype">Con</a> <a id="822" class="Keyword">where</a>                <a id="843" class="Comment">-- basic constants</a>
  <a id="Con.int"></a><a id="864" href="Scm.Abstract-Syntax.html#864" class="InductiveConstructor">int</a>  <a id="869" class="Symbol">:</a> <a id="871" href="Scm.Abstract-Syntax.html#176" class="Datatype">Int</a> <a id="875" class="Symbol">→</a> <a id="877" href="Scm.Abstract-Syntax.html#253" class="Datatype">Con</a>            <a id="892" class="Comment">-- integer numerals</a>
  <a id="Con.#t"></a><a id="914" href="Scm.Abstract-Syntax.html#914" class="InductiveConstructor">#t</a>   <a id="919" class="Symbol">:</a> <a id="921" href="Scm.Abstract-Syntax.html#253" class="Datatype">Con</a>                  <a id="942" class="Comment">-- true</a>
  <a id="Con.#f"></a><a id="952" href="Scm.Abstract-Syntax.html#952" class="InductiveConstructor">#f</a>   <a id="957" class="Symbol">:</a> <a id="959" href="Scm.Abstract-Syntax.html#253" class="Datatype">Con</a>                  <a id="980" class="Comment">-- false</a>
<a id="989" class="Markup">```
</a><a id="993" class="Background">
## Expressions

</a><a id="1010" class="Markup">```agda
</a><a id="1018" class="Keyword">data</a> <a id="1023" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1027" class="Keyword">where</a>                          <a id="1058" class="Comment">-- expressions</a>
  <a id="Exp.con"></a><a id="1075" href="Scm.Abstract-Syntax.html#1075" class="InductiveConstructor">con</a>          <a id="1088" class="Symbol">:</a> <a id="1090" href="Scm.Abstract-Syntax.html#253" class="Datatype">Con</a> <a id="1094" class="Symbol">→</a> <a id="1096" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a>              <a id="1113" class="Comment">-- K</a>
  <a id="Exp.ide"></a><a id="1120" href="Scm.Abstract-Syntax.html#1120" class="InductiveConstructor">ide</a>          <a id="1133" class="Symbol">:</a> <a id="1135" href="Scm.Abstract-Syntax.html#331" class="Function">Ide</a> <a id="1139" class="Symbol">→</a> <a id="1141" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a>              <a id="1158" class="Comment">-- I</a>
  <a id="Exp.⦅_␣_⦆"></a><a id="1165" href="Scm.Abstract-Syntax.html#1165" class="InductiveConstructor Operator">⦅_␣_⦆</a>        <a id="1178" class="Symbol">:</a> <a id="1180" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1184" class="Symbol">→</a> <a id="1186" href="Scm.Abstract-Syntax.html#488" class="Datatype">Exp⋆</a> <a id="1191" class="Symbol">→</a> <a id="1193" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a>       <a id="1203" class="Comment">-- (E E⋆)</a>
  <a id="Exp.⦅lambda_␣_⦆"></a><a id="1215" href="Scm.Abstract-Syntax.html#1215" class="InductiveConstructor Operator">⦅lambda_␣_⦆</a>  <a id="1228" class="Symbol">:</a> <a id="1230" href="Scm.Abstract-Syntax.html#331" class="Function">Ide</a> <a id="1234" class="Symbol">→</a> <a id="1236" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1240" class="Symbol">→</a> <a id="1242" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a>        <a id="1253" class="Comment">-- (lambda I E)</a>
  <a id="Exp.⦅if_␣_␣_⦆"></a><a id="1271" href="Scm.Abstract-Syntax.html#1271" class="InductiveConstructor Operator">⦅if_␣_␣_⦆</a>    <a id="1284" class="Symbol">:</a> <a id="1286" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1290" class="Symbol">→</a> <a id="1292" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1296" class="Symbol">→</a> <a id="1298" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1302" class="Symbol">→</a> <a id="1304" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a>  <a id="1309" class="Comment">-- (if E E₁ E₂)</a>
  <a id="Exp.⦅set!_␣_⦆"></a><a id="1327" href="Scm.Abstract-Syntax.html#1327" class="InductiveConstructor Operator">⦅set!_␣_⦆</a>    <a id="1340" class="Symbol">:</a> <a id="1342" href="Scm.Abstract-Syntax.html#331" class="Function">Ide</a> <a id="1346" class="Symbol">→</a> <a id="1348" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1352" class="Symbol">→</a> <a id="1354" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a>        <a id="1365" class="Comment">-- (set! I E)</a>

<a id="1380" class="Keyword">data</a> <a id="1385" href="Scm.Abstract-Syntax.html#488" class="Datatype">Exp⋆</a> <a id="1390" class="Keyword">where</a>                         <a id="1420" class="Comment">-- expression sequences</a>
  <a id="Exp⋆.␣␣␣"></a><a id="1446" href="Scm.Abstract-Syntax.html#1446" class="InductiveConstructor">␣␣␣</a>          <a id="1459" class="Symbol">:</a> <a id="1461" href="Scm.Abstract-Syntax.html#488" class="Datatype">Exp⋆</a>                   <a id="1484" class="Comment">-- empty sequence</a>
  <a id="Exp⋆._␣␣_"></a><a id="1504" href="Scm.Abstract-Syntax.html#1504" class="InductiveConstructor Operator">_␣␣_</a>         <a id="1517" class="Symbol">:</a> <a id="1519" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1523" class="Symbol">→</a> <a id="1525" href="Scm.Abstract-Syntax.html#488" class="Datatype">Exp⋆</a> <a id="1530" class="Symbol">→</a> <a id="1532" href="Scm.Abstract-Syntax.html#488" class="Datatype">Exp⋆</a>      <a id="1542" class="Comment">-- prefix sequence E E⋆</a>
<a id="1566" class="Markup">```
</a><a id="1570" class="Background">
## Definitions and Programs

</a><a id="1600" class="Markup">```agda
</a><a id="1608" class="Keyword">data</a> <a id="1613" href="Scm.Abstract-Syntax.html#566" class="Datatype">Body</a> <a id="1618" class="Keyword">where</a>
  <a id="Body.␣␣_"></a><a id="1626" href="Scm.Abstract-Syntax.html#1626" class="InductiveConstructor Operator">␣␣_</a>          <a id="1639" class="Symbol">:</a> <a id="1641" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1645" class="Symbol">→</a> <a id="1647" href="Scm.Abstract-Syntax.html#566" class="Datatype">Body</a>             <a id="1664" class="Comment">-- side-effect expression E</a>
  <a id="Body.⦅define_␣_⦆"></a><a id="1694" href="Scm.Abstract-Syntax.html#1694" class="InductiveConstructor Operator">⦅define_␣_⦆</a>  <a id="1707" class="Symbol">:</a> <a id="1709" href="Scm.Abstract-Syntax.html#331" class="Function">Ide</a> <a id="1713" class="Symbol">→</a> <a id="1715" href="Scm.Abstract-Syntax.html#421" class="Datatype">Exp</a> <a id="1719" class="Symbol">→</a> <a id="1721" href="Scm.Abstract-Syntax.html#566" class="Datatype">Body</a>       <a id="1732" class="Comment">-- definition (define I E)</a>
  <a id="Body.⦅begin_⦆"></a><a id="1761" href="Scm.Abstract-Syntax.html#1761" class="InductiveConstructor Operator">⦅begin_⦆</a>     <a id="1774" class="Symbol">:</a> <a id="1776" href="Scm.Abstract-Syntax.html#652" class="Datatype">Body⁺</a> <a id="1782" class="Symbol">→</a> <a id="1784" href="Scm.Abstract-Syntax.html#566" class="Datatype">Body</a>           <a id="1799" class="Comment">-- block (begin B⁺)</a>

<a id="1820" class="Keyword">data</a> <a id="1825" href="Scm.Abstract-Syntax.html#652" class="Datatype">Body⁺</a> <a id="1831" class="Keyword">where</a>                        <a id="1860" class="Comment">-- body sequence</a>
  <a id="Body⁺.␣␣_"></a><a id="1879" href="Scm.Abstract-Syntax.html#1879" class="InductiveConstructor Operator">␣␣_</a>          <a id="1892" class="Symbol">:</a> <a id="1894" href="Scm.Abstract-Syntax.html#566" class="Datatype">Body</a> <a id="1899" class="Symbol">→</a> <a id="1901" href="Scm.Abstract-Syntax.html#652" class="Datatype">Body⁺</a>           <a id="1917" class="Comment">-- single body sequence B</a>
  <a id="Body⁺._␣␣_"></a><a id="1945" href="Scm.Abstract-Syntax.html#1945" class="InductiveConstructor Operator">_␣␣_</a>         <a id="1958" class="Symbol">:</a> <a id="1960" href="Scm.Abstract-Syntax.html#566" class="Datatype">Body</a> <a id="1965" class="Symbol">→</a> <a id="1967" href="Scm.Abstract-Syntax.html#652" class="Datatype">Body⁺</a> <a id="1973" class="Symbol">→</a> <a id="1975" href="Scm.Abstract-Syntax.html#652" class="Datatype">Body⁺</a>   <a id="1983" class="Comment">-- prefix body sequence B B⁺</a>

<a id="2013" class="Keyword">data</a> <a id="2018" href="Scm.Abstract-Syntax.html#724" class="Datatype">Prog</a> <a id="2023" class="Keyword">where</a>                         <a id="2053" class="Comment">-- programs</a>
  <a id="Prog.␣␣␣"></a><a id="2067" href="Scm.Abstract-Syntax.html#2067" class="InductiveConstructor">␣␣␣</a>          <a id="2080" class="Symbol">:</a> <a id="2082" href="Scm.Abstract-Syntax.html#724" class="Datatype">Prog</a>                   <a id="2105" class="Comment">-- empty program</a>
  <a id="Prog.␣␣_"></a><a id="2124" href="Scm.Abstract-Syntax.html#2124" class="InductiveConstructor Operator">␣␣_</a>          <a id="2137" class="Symbol">:</a> <a id="2139" href="Scm.Abstract-Syntax.html#652" class="Datatype">Body⁺</a> <a id="2145" class="Symbol">→</a> <a id="2147" href="Scm.Abstract-Syntax.html#724" class="Datatype">Prog</a>           <a id="2162" class="Comment">-- non-empty program B⁺</a>

<a id="2187" class="Keyword">infix</a> <a id="2193" class="Number">30</a> <a id="2196" href="Scm.Abstract-Syntax.html#2124" class="InductiveConstructor Operator">␣␣_</a>
<a id="2200" class="Keyword">infixr</a> <a id="2207" class="Number">20</a> <a id="2210" href="Scm.Abstract-Syntax.html#1945" class="InductiveConstructor Operator">_␣␣_</a>
<a id="2215" class="Markup">```</a></pre></body></html>